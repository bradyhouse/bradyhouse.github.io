import{u as G,b as S}from"./vue-router-HjeD-AfS.js";import{h as L}from"./html2canvas-BfYXEYrK.js";import{l as g}from"./lodash-TVC-EY0t.js";import{_}from"./index-D2poQEdM.js";import{o as i,f as l,r as u,D as V,q as k,F as v,j as P,l as w,g as t,v as Z,y as D,u as y,x as F,E as R,t as T}from"./@vue-D4AyGaXM.js";import"./pinia-ZECr7jlV.js";/* empty css                   */const J={},C={src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxlbGxpcHNlIGN4PSIxMiIgY3k9IjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgcng9IjQiIHJ5PSI0Ij48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwIiBmaWxsPSJmcmVlemUiIGF0dHJpYnV0ZU5hbWU9ImN5IiBiZWdpbj0iMDtzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDIuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMzc1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSI1OzIwIi8+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0icngiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDVzIiBrZXlTcGxpbmVzPSIuMzMsMCwuNjYsLjMzOy4zMywuNjYsLjY2LDEiIHZhbHVlcz0iNDs0Ljg7NCIvPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InJ5IiBiZWdpbj0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwLmVuZCIgY2FsY01vZGU9InNwbGluZSIgZHVyPSIwLjA1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMzsuMzMsLjY2LC42NiwxIiB2YWx1ZXM9IjQ7Mzs0Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMSIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDI1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSIyMDsyMC41Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMiIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDEuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuNHMiIGtleVNwbGluZXM9Ii4zMywuNjYsLjY2LDEiIHZhbHVlcz0iMjAuNTs1Ii8+PC9lbGxpcHNlPjwvc3ZnPg=="};function U(x,p){return i(),l("img",C)}const X=_(J,[["render",U]]),A={key:0,class:"dashboards"},H={style:{"text-align":"center","padding-top":"10px"}},Q={key:1},E={style:{border:"dotted 2px gray"}},$={style:{"vertical-align":"top"}},q=["src"],O={style:{"vertical-align":"top"}},K=["src"],ee={__name:"FiddleView",setup(x){const p=G(),M=window.location.pathname,z=p.path,f=M.replace(z,""),B=S().getRoutes().filter(e=>e.name!==void 0&&e.name!=="404"&&e.name!=="fiddle"),m=[],I=[],o=u(null),N=u(null),h=u(null),c=u(!1);let r=null,d=null;const Y=g.debounce(async e=>{if(e){const n=document.getElementById("targetPage"),s=await L(n.contentWindow.document.body),a=s.getContext("2d");a.filter="blur(5px)",a.drawImage(s,0,0,s.width/2,s.height/2);debugger;const j=s.toDataURL("image/png");h.value=j,m.push({name:String(d.name),preview:String(j),path:String(d.path)})}},2e3);B.forEach(e=>{const n=localStorage.getItem(e.name+"-preview");n?m.push({name:String(e.name),preview:String(n),path:String(e.path)}):I.push({name:String(e.name),preview:null,path:String(e.path)})});const b=g.debounce(()=>{if(I.length){const e=I.pop();c.value=!0;debugger;e.name?(d=e,r=e.name+"-preview",o.value="http://"+window.location.host+"/"+f+e.name,console.log(r,o.value)):(console.log("targetRoute",e),d=null,r=null,o.value=null)}else c.value=!1},1e3);V(()=>{b()});const W=g.debounce(async e=>{await Y(r),setTimeout(()=>{b()},5e3)},500);return(e,n)=>{const s=k("router-link");return i(),l(v,null,[c.value?w("",!0):(i(),l("div",A,[(i(),l(v,null,P(m,a=>Z(s,{key:a.path,to:a.path},{default:F(()=>[t("div",{class:"dashboard square",style:R({backgroundImage:`url(${a.preview})`,backgroundRepeat:"no-repeat",backgroundSize:"100% auto",filter:"grayscale(100%)",border:"dashed 1px gray"})},null,4),t("h4",H,T(a.name),1)]),_:2},1032,["to"])),64))])),c.value?(i(),l("div",Q,[t("p",null,[Z(X),D(" Â Generting previews ... ")]),t("div",null,[t("table",E,[t("tr",null,[t("td",$,[t("iframe",{id:"targetPage",ref_key:"elFrame",ref:N,style:{height:"400px",width:"600px"},onLoad:n[0]||(n[0]=(...a)=>y(W)&&y(W)(...a)),src:o.value},null,40,q)]),t("td",O,[t("img",{src:h.value,style:{width:"200px"}},null,8,K)])])])])])):w("",!0)],64)}}},re=_(ee,[["__scopeId","data-v-c3404b08"]]);export{re as default};
