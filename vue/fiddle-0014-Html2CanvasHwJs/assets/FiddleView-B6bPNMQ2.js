import{u as Y,b as L}from"./vue-router-HjeD-AfS.js";import{h as V}from"./html2canvas-BfYXEYrK.js";import{l as b}from"./lodash-TVC-EY0t.js";import{_ as S}from"./index-B2ilzHxh.js";import{o,f as c,r as m,D as k,q as T,F as x,j as R,g as e,l as M,v as _,y as C,t as Z,u as z,x as H,z as A,A as F,E as J}from"./@vue-D4AyGaXM.js";import"./pinia-ZECr7jlV.js";/* empty css                   */const U={},Q={src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxlbGxpcHNlIGN4PSIxMiIgY3k9IjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgcng9IjQiIHJ5PSI0Ij48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwIiBmaWxsPSJmcmVlemUiIGF0dHJpYnV0ZU5hbWU9ImN5IiBiZWdpbj0iMDtzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDIuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMzc1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSI1OzIwIi8+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0icngiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDVzIiBrZXlTcGxpbmVzPSIuMzMsMCwuNjYsLjMzOy4zMywuNjYsLjY2LDEiIHZhbHVlcz0iNDs0Ljg7NCIvPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InJ5IiBiZWdpbj0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwLmVuZCIgY2FsY01vZGU9InNwbGluZSIgZHVyPSIwLjA1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMzsuMzMsLjY2LC42NiwxIiB2YWx1ZXM9IjQ7Mzs0Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMSIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDI1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSIyMDsyMC41Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMiIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDEuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuNHMiIGtleVNwbGluZXM9Ii4zMywuNjYsLjY2LDEiIHZhbHVlcz0iMjAuNTs1Ii8+PC9lbGxpcHNlPjwvc3ZnPg=="};function E(n,j){return o(),c("img",Q)}const X=S(U,[["render",E]]),v=n=>(A("data-v-1cf197d5"),n=n(),F(),n),O={key:0,class:"dashboards"},q={style:{"text-align":"center","padding-top":"10px"}},$=v(()=>e("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiI+PGVsbGlwc2UgY3g9IjEyIiBjeT0iNSIgcng9IjkiIHJ5PSIzIi8+PHBhdGggZD0iTTIxIDEyYzAgMS42Ni00IDMtOSAzcy05LTEuMzQtOS0zIi8+PHBhdGggZD0iTTMgNXYxNGMwIDEuNjYgNCAzIDkgM3M5LTEuMzQgOS0zVjUiLz48L2c+PC9zdmc+"},null,-1)),K=[$],ee={key:1},te=v(()=>e("h3",null,"Generting previews ...",-1)),ae={style:{padding:"10px"}},ie={style:{width:"100%"}},le={style:{border:"dotted 2px gray",width:"60%"}},ne=v(()=>e("thead",{style:{padding:"10px"}},[e("th",{style:{border:"solid 1px gainsboro","text-align":"left","vertical-align":"middle",padding:"10px",filter:"invert(100%)"}},[e("h5",null,"I F R A M E")]),e("th",{style:{border:"solid 1px gainsboro","text-align":"right","vertical-align":"middle",padding:"10px",filter:"invert(100%)"}},[e("h5",null,"P R E V I E W ")])],-1)),se={style:{"vertical-align":"top","text-align":"left"}},oe=["src"],ce={style:{"vertical-align":"top","text-align":"right"}},de=["src"],re={__name:"FiddleView",setup(n){const j=Y(),N=window.location.pathname,G=j.path,f=N.replace(G,""),B=L().getRoutes().filter(t=>t.name!==void 0&&t.name!=="404"&&t.name!=="fiddle"),g=[],I=[],s=m(null),P=m(null),p=m(null),d=m(!0);let r=null,u=null;const W=()=>{localStorage.clear(),window.location.reload()},D=b.debounce(async t=>{if(t){const i=document.getElementById("targetPage"),l=await V(i.contentWindow.document.body),a=l.getContext("2d");a.filter="blur(1.2px) grayscale(100%) contrast(200%)",a.drawImage(l,0,0,l.width,l.height);debugger;const h=l.toDataURL("image/png");p.value=h,localStorage.setItem(t,h),g.push({name:String(u.name),preview:String(h),path:String(u.path)})}},2e3);B.forEach(t=>{const i=localStorage.getItem(t.name+"-preview");if(i)g.push({name:String(t.name),preview:String(i),path:String(t.path)});else{debugger;I.push({name:String(t.name),preview:null,path:String(t.path)})}});const y=b.debounce(()=>{if(I.length){const t=I.pop();d.value=!0,t.name?(u=t,r=t.name+"-preview",s.value=window.location.protocol+"//"+window.location.host+"/"+f+t.name,p.value=null,console.log(r,s.value)):(console.log("targetRoute",t),u=null,r=null,s.value=null)}else d.value=!1},1e3);k(()=>{y()});const w=b.debounce(async t=>{await D(r),setTimeout(()=>{y()},5e3)},500);return(t,i)=>{const l=T("router-link");return o(),c(x,null,[d.value?M("",!0):(o(),c("div",O,[(o(),c(x,null,R(g,a=>_(l,{key:a.path,to:a.path},{default:H(()=>[e("div",{class:"dashboard square",style:J({backgroundImage:`url(${a.preview})`,backgroundRepeat:"no-repeat",backgroundSize:"100% auto",border:"dashed 1px gray"})},null,4),e("h4",q,Z(a.name),1)]),_:2},1032,["to"])),64)),e("div",null,[e("div",{class:"dashboard square",onClick:W},K),e("h4",{style:{"text-align":"center","padding-top":"10px"},onClick:W},"Clear Local Storage")])])),d.value?(o(),c("div",ee,[e("p",null,[_(X),C(" Â "),te]),e("div",ae,[e("div",ie,[e("h5",null,Z(s.value),1)]),e("table",le,[ne,e("tbody",null,[e("tr",null,[e("td",se,[e("iframe",{id:"targetPage",ref_key:"elFrame",ref:P,style:{height:"400px",width:"600px"},onLoad:i[0]||(i[0]=(...a)=>z(w)&&z(w)(...a)),src:s.value},null,40,oe)]),e("td",ce,[e("img",{src:p.value,style:{width:"200px"}},null,8,de)])])])])])])):M("",!0)],64)}}},je=S(re,[["__scopeId","data-v-1cf197d5"]]);export{je as default};
