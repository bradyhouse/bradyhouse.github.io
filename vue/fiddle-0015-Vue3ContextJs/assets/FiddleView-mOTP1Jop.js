import{n as x,r as d,o as i,f as r,F as f,j as k,l as _,D as y,t as g,s as w,g as s,E as c,v as M,q as b}from"./@vue-CfWGTw05.js";import{P as E}from"./plotly.js-dist-DoSWzsu2.js";import{l as L}from"./lodash-D-F83w2z.js";import{_ as C}from"./index-DNzDV9ph.js";import"./pinia-D2Ycuxr-.js";import"./vue-router-BRZl1OPD.js";/* empty css                   */const h={data(){return{show:!1,event:null,mouseInside:!1}},methods:{open(e){if(e&&e.actions){const t=e.event;this.menuLeft=t.pageX+"px",this.menuTop=t.pageY+"px",this.event=e,x(()=>{this.show=!0})}},onClick(e){this.show=!1,this.$emit("action-clicked",{...this.event,eventHandler:e})},close(){L.debounce(()=>{this.mouseInside||(this.show=!1,this.event=null)},500)()},onMouseEnter(){this.mouseInside=!0},onMouseLeave(){this.mouseInside=!1,this.close()},onCallbackComplete(){this.mouseInside=!1,this.close()}},computed:{actions(){return this.event?this.event.actions:[]}},mounted(){document.addEventListener("click",this.close,!0)},beforeUnmount(){document.removeEventListener("click",this.close,!0)},setup(){const e=d("0px"),t=d("0px");return{menuLeft:e,menuTop:t}}},m=()=>{y(e=>({"4d040805":e.menuLeft,23846197:e.menuTop}))},p=h.setup;h.setup=p?(e,t)=>(m(),p(e,t)):m;const R=["onClick"];function P(e,t,a,v,u,n){return u.show?(i(),r("div",{key:0,class:"context-menu",onMouseenter:t[0]||(t[0]=(...o)=>n.onMouseEnter&&n.onMouseEnter(...o)),onMouseleave:t[1]||(t[1]=(...o)=>n.onMouseLeave&&n.onMouseLeave(...o))},[(i(!0),r(f,null,k(n.actions,(o,l)=>(i(),r("li",{key:l,onClick:B=>n.onClick(o),class:"menu-item"},g(o.label),9,R))),128))],32)):_("",!0)}const A=C(h,[["render",P],["__scopeId","data-v-ecd3a915"]]),I={components:{ContextMenu:A},data(){return{showMenu:!1,menuX:0,menuY:0,contextMenuActions:[{label:"Edit",action:"edit"},{label:"Delete",action:"delete"}],targetPoint:null}},mounted(){this.drawChart(this.$refs.plotlyChart1,"bar"),this.drawChart(this.$refs.plotlyChart2,"bar"),this.drawChart(this.$refs.plotlyChart3,"bar")},methods:{drawChart(e,t){const a=[{x:[1,2,3,4],y:[10,15,13,17],type:t,mode:"markers"}];E.newPlot(e,a),e.on("plotly_click",this.handlePlotlyEvent.bind(this))},handlePlotlyEvent(e){if(e.points&&e.points.length){debugger;this.showMenu=!0,this.$refs.contextMenu.open({actions:w(this.contextMenuActions),event:e.event})}else this.showMenu=!1},onRightClick(e){const t=e.detail;t&&(this.showMenu=!0,this.menuX=e.clientX,this.menuY=e.clientY,this.targetPoint=t.points[0])},handleActionClick(e){console.log(e,this.targetPoint),this.showMenu=!1}}},V={ref:"scrollbox",class:"scrollable"},T={class:"h-100 d-flex align-items-center justify-content-center"},X={width:"100%"},Y=s("tr",null,[s("th",{colspan:"3",style:{"text-align":"center"}},[s("h3",null,"Right Click on a bar in any of the charts")])],-1);function j(e,t,a,v,u,n){const o=b("ContextMenu");return i(),r(f,null,[s("div",V,[s("div",T,[s("table",X,[s("tbody",null,[Y,s("tr",null,[s("td",null,[s("div",{style:{width:"500px"},ref:"plotlyChart1",onContextmenu:t[0]||(t[0]=c((...l)=>n.onRightClick&&n.onRightClick(...l),["prevent"]))},null,544)]),s("td",null,[s("div",{style:{width:"500px"},ref:"plotlyChart2",onContextmenu:t[1]||(t[1]=c((...l)=>n.onRightClick&&n.onRightClick(...l),["prevent"]))},null,544)]),s("td",null,[s("div",{style:{width:"1000px !important",height:"1000px !important"},ref:"plotlyChart3",onContextmenu:t[2]||(t[2]=c((...l)=>n.onRightClick&&n.onRightClick(...l),["prevent"]))},null,544)])])])])])],512),M(o,{ref:"contextMenu",actions:u.contextMenuActions,onActionClicked:n.handleActionClick},null,8,["actions","onActionClicked"])],64)}const U=C(I,[["render",j]]);export{U as default};
